version: '3.8'

services:
  consumo-predictor:
    build:
      context: .
      dockerfile: predictor/Dockerfile
    image: consumo-predictor:latest
    container_name: consumo-predictor
    environment:
      # Variables de entorno por defecto (ejemplo consumo de alcohol)
      - AGE=23
      - GENDER=0
      - PARENT_ALCOHOL=1
      - ACADEMIC_SEMESTRE=6
    command: python predict_api.py --examples

  # Servicio para predicción personalizada usando variables de entorno
  consumo-predictor-custom:
    build:
      context: .
      dockerfile: predictor/Dockerfile
    image: consumo-predictor:latest
    container_name: consumo-predictor-custom
    environment:
      # Ejemplo Versicolor - cambiar estos valores según necesidad
      - AGE=30
      - GENDER=1
      - PARENT_ALCOHOL=1
      - ACADEMIC_SEMESTRE=12
    command: python predict_api.py --env
    profiles:
      - custom
